<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>.huser6666666 - une info en plus ?</title>
<style>
  body {
    background: #000;
    color: #eee;
    font-family: 'Courier New', monospace;
    text-align: center;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    transition: background 0.3s, color 0.3s;
  }
  h1 { color: #941F06; letter-spacing:2px; font-size:1.4em; margin-bottom:10px; }
  #message { color:#aaa; margin-bottom:20px; }
  input {
    background:#111; border:1px solid #941F06; color:#fff; padding:10px; border-radius:6px;
    text-align:center; font-size:18px; width:160px; outline:none;
  }
  button {
    margin-top:12px; background:#941F06; color:#fff; border:none; padding:10px 20px;
    font-size:16px; border-radius:6px; cursor:pointer;
  }
  #feedback { margin-top:14px; height:22px; color:#f5c; }

  /* === Flash === */
  #flash {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.05s ease;
    pointer-events: none;
    z-index: 9999;
  }

  #flash svg {
    width: 120px;
    height: 120px;
    fill: #000;
  }
</style>
</head>
<body>
  <h1>.huser6666666 te dois un nouveau fichier.</h1>
  <div id="message">trouve le code et entre-le ici.</div>

  <input id="codeInput" placeholder="entre le code fast..." autocomplete="off" />
  <button id="checkBtn">valider</button>
  <div id="feedback"></div>

  <!-- Flash visuel -->
  <div id="flash">
    <svg viewBox="0 0 24 24">
      <path d="M7 2C5.9 2 5 2.9 5 4v16c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H7zm5 21c-.55 0-1-.45-1-1h2c0 .55-.45 1-1 1zm3-4H8V5h7v14z"/>
    </svg>
  </div>

<script>
// === CONFIG ===
const correctCode = "19554";                
const redirectURL  = "https://melvintalbi-pixel.github.io/huser6666666/gazette.html";
const ambienceURL  = "https://www.chosic.com/wp-content/uploads/2023/06/heartbeat-soundsmith(chosic.com).mp3";
// ==============

let audio = null;
let audioStarted = false;

// démarre la musique au premier tap (débloque audio sur mobile)
async function startAudioOnce() {
  if (audioStarted) return;
  audioStarted = true;
  audio = new Audio(ambienceURL);
  audio.loop = true;
  audio.volume = 0.9;
  audio.play().catch(()=>{/* audio bloqué, tant pis */});
}

// vérifie le code entré
function checkCode() {
  const val = document.getElementById('codeInput').value.trim();
  const fb = document.getElementById('feedback');

  if (!val) {
    fb.textContent = ".entre quelque chose.";
    return;
  }

  if (val === correctCode) {
    fb.style.color = "#0f0";
    fb.textContent = ".tu as réussi.";
    if (audio) audio.pause();
    setTimeout(()=> {
      alert(".le silence se brise... regarde la gazette.");
      window.location.href = redirectURL;
    }, 900);
  } else {
    fb.style.color = "#f66";
    fb.textContent = ".mauvais code.";
  }
}

// === Flash effet ===
function flashScreen() {
  const flash = document.getElementById('flash');
  flash.style.opacity = 1;
  setTimeout(()=> flash.style.opacity = 0, 80); // flash très rapide
}

// Lancer flash toutes les 20 secondes
setInterval(flashScreen, 20000);

// événement sur bouton
document.getElementById('checkBtn').addEventListener('click', checkCode);
document.getElementById('codeInput').addEventListener('keydown', (e) => {
  if (e.key === 'Enter') checkCode();
});

// listener pour activer musique à la première interaction
document.body.addEventListener('click', startAudioOnce, { once: true });
</script>
</body>
</html>

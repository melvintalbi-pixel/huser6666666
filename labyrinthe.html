<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<title>Labyrinthe Hardcore PC</title>
<style>
:root{
  --bg:#050304;
  --wall:#0b0705;
  --floor:#2b2218;
  --player:#f6e6b2;
  --trap:#7b1420;
  --exit:#0b6b33;
  --text:#efe6c9;
  --accent:#b98a26;
}
html,body{margin:0;padding:0;height:100%;overflow:hidden;background:var(--bg);font-family:sans-serif;color:var(--text);}
#grid{display:grid;grid-template-columns:repeat(15,48px);grid-template-rows:repeat(15,48px);gap:2px;width:100vw;height:100vh;}
.cell{width:48px;height:48px;border-radius:3px;}
.wall{background:var(--wall);}
.empty{background:var(--floor);}
.player{background:var(--player);box-shadow:0 0 8px #d4af37;}
.trap{background:var(--trap);}
.exit{background:var(--exit);}
#modalBackdrop{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);justify-content:center;align-items:center;z-index:200;}
#modal{background:linear-gradient(180deg,#22160f,#0f0b08);padding:18px;border-radius:10px;border:2px solid rgba(185,138,38,0.18);width:360px;color:var(--text);text-align:center;}
#modal h2{color:var(--accent);}
#modal input{padding:8px;border-radius:6px;border:1px solid #333;margin-top:10px;width:80%;text-align:center;}
#modal button{margin-top:12px;padding:8px 12px;border-radius:6px;border:none;background:var(--accent);color:#000;cursor:pointer;}
</style>
</head>
<body>
<div id="grid"></div>
<div id="modalBackdrop"><div id="modal"></div></div>

<script>
// Labyrinthe 15x15 logique, PC seulement, trap obligatoire
const ROWS = 15;
const COLS = 15;
const gridEl = document.getElementById('grid');
const modalBackdrop = document.getElementById('modalBackdrop');
const modal = document.getElementById('modal');

let maze = [];
let player = {r:0,c:0};
let trapDone = false;

// Génération simple d'un labyrinthe logique avec un chemin unique
function initMaze(){
  // tout murs
  maze = Array.from({length:ROWS},()=>Array(COLS).fill('wall'));

  // chemin principal : de [0,0] à [14,14] en passant par le trap [7,7]
  for(let r=0;r<=7;r++) maze[r][0]='empty';
  for(let c=0;c<=7;c++) maze[7][c]='empty';
  for(let r=7;r<ROWS;r++) maze[r][7]='empty';
  for(let c=7;c<COLS;c++) maze[ROWS-1][c]='empty';

  // placer trap obligatoire
  maze[7][7]='trap';

  // placer la sortie
  maze[ROWS-1][COLS-1]='exit';

  // placer player
  player.r=0; player.c=0;
}

function renderMaze(){
  gridEl.innerHTML='';
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const div=document.createElement('div');
      div.classList.add('cell',maze[r][c]);
      if(r===player.r && c===player.c) div.classList.add('player');
      gridEl.appendChild(div);
    }
  }
}

function move(dr,dc){
  const nr=player.r+dr;
  const nc=player.c+dc;
  if(nr<0||nc<0||nr>=ROWS||nc>=COLS) return;
  const type = maze[nr][nc];
  if(type==='wall') return;
  if(type==='trap' && !trapDone){
    trapDone=true;
    showTrapPuzzle();
    return;
  }
  player.r=nr;
  player.c=nc;
  renderMaze();
  if(type==='exit') showExit();
}

function showTrapPuzzle(){
  modal.innerHTML=`
    <h2>Piège Mathématique</h2>
    <p>Pour continuer, entre le chiffre mystère : 6666666</p>
    <input id="trapInput" placeholder="?" />
    <br/><button id="trapBtn">Valider</button>
  `;
  modalBackdrop.style.display='flex';
  document.getElementById('trapBtn').onclick=()=>{
    const val=document.getElementById('trapInput').value.trim();
    if(val==='6666666'){
      modalBackdrop.style.display='none';
      renderMaze();
    } else {
      alert("Erreur ! Retente !");
    }
  };
}

function showExit(){
  modal.innerHTML=`
    <h2>Félicitations !</h2>
    <p>Le mot de passe est : ENVOIE UN MESSAGE PRIVE A HUSER6666666 QUI CERTIFIE SUR L'HONNEUR QUE TU NE DONNERAS CETTE SOLUTION A PERSONNE ET IL TE DONNERA LE MOT DE PASSE</p>
    <button onclick="window.location.reload()">Recommencer</button>
  `;
  modalBackdrop.style.display='flex';
}

window.addEventListener('keydown',e=>{
  switch(e.key.toLowerCase()){
    case 'z': case 'arrowup': move(-1,0); break;
    case 's': case 'arrowdown': move(1,0); break;
    case 'q': case 'arrowleft': move(0,-1); break;
    case 'd': case 'arrowright': move(0,1); break;
  }
});

initMaze();
renderMaze();
</script>
</body>
</html>
